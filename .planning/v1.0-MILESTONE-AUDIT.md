---
milestone: v1.0
audited: 2026-02-26T14:00:00Z
status: tech_debt
scores:
  requirements: 28/28
  phases: 5/5
  integration: 26/28
  flows: 7/7
gaps:
  requirements: []
  integration:
    - id: "QUERY-04"
      status: "satisfied (reworded)"
      phase: "Phase 4 — Query Interface"
      detail: "Native EXPLAIN verb interception not delivered; explain_semantic_view() function satisfies the reworded requirement. Native EXPLAIN deferred to v0.2 as QUERY-V2-03."
    - id: "TEST-05"
      status: "satisfied (partial scope)"
      phase: "Phase 5 — Hardening and Docs"
      detail: "Fuzz targets cover JSON parsing boundary and SQL generation path. FFI execution layer (execute_sql_raw, read_varchar_from_vector) is not fuzz-covered — this is the highest-risk unsafe code but architecturally cannot run standalone without the loadable-extension stub."
  flows: []
tech_debt:
  - phase: 01-scaffold
    items:
      - "Human verification needed: CI workflows execute on GitHub (PullRequestCI, MainDistributionPipeline, CodeQuality)"
      - "Human verification needed: SQLLogicTest LOAD smoke test catches ABI mismatches"
      - "Human verification needed: DuckDB Version Monitor conditional PR logic"
  - phase: 02-storage-and-ddl
    items:
      - "Catalog table name differs from REQUIREMENTS.md spec (_semantic_views_catalog vs semantic_layer._definitions) — accepted design decision"
  - phase: 03-expansion-engine
    items:
      - "3 catalog sidecar tests fail in sandbox environment (pass locally) — pre-existing Phase 2 tests unrelated to Phase 3"
  - phase: 04-query-interface
    items:
      - "Dead code: logical_type_from_duckdb_type function + column_type_ids field (#[allow(dead_code)]) in table_function.rs"
      - "pub mod query not feature-gated at lib.rs level (cosmetic inconsistency, no runtime impact)"
      - "Native EXPLAIN on semantic_query() shows physical plan, not expanded SQL — deferred to v0.2 as QUERY-V2-03"
      - "test/sql/phase4_iceberg.test not created — test/integration/test_ducklake.py substituted (justified: SQLLogicTest runner cannot install extensions)"
      - "Test idempotency: phase2_ddl.test restart section hangs on re-run due to leftover sidecar file"
      - "Human verification needed: DuckLake/Iceberg integration test (just setup-ducklake && just test-iceberg)"
      - "Human verification needed: Full SQLLogicTest suite (just test-sql)"
  - phase: 05-hardening-and-docs
    items:
      - "FFI execution layer (execute_sql_raw, read_varchar_from_vector) not covered by any fuzz target — highest-risk unsafe code"
      - "Human verification needed: cargo fuzz run for all 3 targets (requires nightly toolchain)"
      - "Human verification needed: MAINTAINER.md readability review by a Rust newcomer"
---

# Milestone v1.0 Audit Report

**Milestone:** v1.0 — DuckDB Semantic Views
**Audited:** 2026-02-26
**Status:** TECH DEBT — all requirements met, no critical blockers, accumulated deferred items need review

## Scores

| Category | Score | Notes |
|----------|-------|-------|
| Requirements | 28/28 | All v0.1 requirements satisfied across 3 independent sources |
| Phases | 5/5 | All phase verifications passed |
| Integration | 26/28 | 2 requirements flagged PARTIAL by integration checker (accepted) |
| E2E Flows | 7/7 | All user flows complete end-to-end |

---

## Requirements Coverage (3-Source Cross-Reference)

### Phase 1: Scaffold

| REQ-ID | VERIFICATION.md | SUMMARY Frontmatter | REQUIREMENTS.md | Final Status |
|--------|----------------|---------------------|-----------------|-------------|
| INFRA-01 | SATISFIED | 01-01 | [x] Complete | **satisfied** |
| INFRA-02 | SATISFIED | 01-02 | [x] Complete | **satisfied** |
| INFRA-03 | SATISFIED | 01-03 | [x] Complete | **satisfied** |
| INFRA-04 | SATISFIED | 01-02 | [x] Complete | **satisfied** |
| STYLE-01 | SATISFIED | 01-01 | [x] Complete | **satisfied** |
| STYLE-02 | SATISFIED | 01-01 | [x] Complete | **satisfied** |

### Phase 2: Storage and DDL

| REQ-ID | VERIFICATION.md | SUMMARY Frontmatter | REQUIREMENTS.md | Final Status |
|--------|----------------|---------------------|-----------------|-------------|
| DDL-01 | SATISFIED | 02-01, 02-02, 02-03 | [x] Complete | **satisfied** |
| DDL-02 | SATISFIED | 02-01, 02-02, 02-03 | [x] Complete | **satisfied** |
| DDL-03 | SATISFIED | 02-01, 02-02, 02-03 | [x] Complete | **satisfied** |
| DDL-04 | SATISFIED | 02-01, 02-02, 02-03 | [x] Complete | **satisfied** |
| DDL-05 | SATISFIED | 02-01, 02-03, 02-04 | [x] Complete | **satisfied** |

### Phase 3: Expansion Engine

| REQ-ID | VERIFICATION.md | SUMMARY Frontmatter | REQUIREMENTS.md | Final Status |
|--------|----------------|---------------------|-----------------|-------------|
| MODEL-01 | SATISFIED | 03-01 | [x] Complete | **satisfied** |
| MODEL-02 | SATISFIED | 03-01 | [x] Complete | **satisfied** |
| MODEL-03 | SATISFIED | 03-02 | [x] Complete | **satisfied** |
| MODEL-04 | SATISFIED | 03-01 | [x] Complete | **satisfied** |
| EXPAND-01 | SATISFIED | 03-01 | [x] Complete | **satisfied** |
| EXPAND-02 | SATISFIED | 03-02 | [x] Complete | **satisfied** |
| EXPAND-03 | SATISFIED | 03-02 | [x] Complete | **satisfied** |
| EXPAND-04 | SATISFIED | 03-01 | [x] Complete | **satisfied** |
| TEST-01 | SATISFIED | 03-01, 03-02 | [x] Complete | **satisfied** |
| TEST-02 | SATISFIED | 03-03 | [x] Complete | **satisfied** |

### Phase 4: Query Interface

| REQ-ID | VERIFICATION.md | SUMMARY Frontmatter | REQUIREMENTS.md | Final Status |
|--------|----------------|---------------------|-----------------|-------------|
| QUERY-01 | SATISFIED | 04-01 | [x] Complete | **satisfied** |
| QUERY-02 | SATISFIED | 04-01 | [x] Complete | **satisfied** |
| QUERY-03 | SATISFIED | 04-01 | [x] Complete | **satisfied** |
| QUERY-04 | SATISFIED (reworded) | 04-02 | [x] Complete | **satisfied** |
| TEST-03 | SATISFIED | 04-03 | [x] Complete | **satisfied** |
| TEST-04 | SATISFIED | 04-03 | [x] Complete | **satisfied** |

### Phase 5: Hardening and Docs

| REQ-ID | VERIFICATION.md | SUMMARY Frontmatter | REQUIREMENTS.md | Final Status |
|--------|----------------|---------------------|-----------------|-------------|
| TEST-05 | SATISFIED | 05-01 | [x] Complete | **satisfied** |
| DOCS-01 | SATISFIED | 05-02 | [x] Complete | **satisfied** |

### Orphan Detection

No orphaned requirements. All 28 REQ-IDs in the REQUIREMENTS.md traceability table appear in at least one phase VERIFICATION.md.

---

## Phase Verification Summary

| Phase | Status | Score | Notes |
|-------|--------|-------|-------|
| 1. Scaffold | passed | 15/15 | 3 items need human verification (CI on GitHub) |
| 2. Storage and DDL | passed | 10/10 | Re-verified after DDL-05 gap closure |
| 3. Expansion Engine | passed | 5/5 | All unit + proptest green |
| 4. Query Interface | passed | 5/5 | QUERY-04 reworded; native EXPLAIN → v0.2 |
| 5. Hardening and Docs | human_needed | 5/5 | Fuzz execution + MAINTAINER readability review |

---

## Integration Check Results

**Wiring:** 18 cross-phase exports correctly consumed, 1 orphaned (dead code), 0 missing
**E2E Flows:** 7/7 complete

### E2E Flow Status

| Flow | Status | Evidence |
|------|--------|----------|
| Define → List → Describe → Drop | Complete | phase2_ddl.test sections 1-9 |
| Define → Query (semantic_query) | Complete | phase4_query.test section 2 |
| Define → Explain (explain_semantic_view) | Complete | phase4_query.test section 5 |
| Persistence (Define → Close → Reopen → Query) | Complete | phase2_ddl.test section 10 restart cycle |
| Invalid view name → Error with suggestion | Complete | phase4_query.test section 7 |
| Invalid dimension → Error with suggestion | Complete | expand.rs unit tests + phase4_query.test |
| WHERE clause AND-composition with view filters | Complete | phase4_query.test section 3 |

### Integration Issues

| # | Issue | Severity | Affected REQs | Resolution |
|---|-------|----------|---------------|------------|
| 1 | FFI execution layer not fuzz-covered | Low | TEST-05 | Architecturally cannot run standalone; future fuzz_varchar_read target possible |
| 2 | Native EXPLAIN shows physical plan, not expanded SQL | Low | QUERY-04 | Formally accepted; deferred to v0.2 as QUERY-V2-03 |
| 3 | phase2_ddl.test restart section hangs on re-run | Low | DDL-05 (test only) | Add cleanup at start of section 10 |
| 4 | pub mod query feature-gate inconsistency | Cosmetic | None | Internal gating in query/mod.rs compensates |
| 5 | Dead code: logical_type_from_duckdb_type + column_type_ids | Cosmetic | None | Retained for future typed output columns |

---

## Tech Debt by Phase

### Phase 1: Scaffold (3 items)
- Human verification: CI workflows execute on GitHub
- Human verification: SQLLogicTest LOAD catches ABI mismatches
- Human verification: DuckDB Version Monitor PR logic

### Phase 2: Storage and DDL (1 item)
- Catalog table name deviation from spec (accepted design decision)

### Phase 3: Expansion Engine (1 item)
- 3 catalog sidecar tests fail in sandbox (pre-existing, pass locally)

### Phase 4: Query Interface (7 items)
- Dead code: 2 `#[allow(dead_code)]` items in table_function.rs
- Feature-gate inconsistency for `pub mod query` (cosmetic)
- Native EXPLAIN deferred to v0.2 as QUERY-V2-03
- Iceberg test uses Python instead of SQLLogicTest (justified)
- Test idempotency: restart section sidecar cleanup
- Human verification: DuckLake/Iceberg test
- Human verification: Full SQLLogicTest suite

### Phase 5: Hardening and Docs (3 items)
- FFI execution layer not fuzz-covered
- Human verification: cargo fuzz run (3 targets, nightly toolchain)
- Human verification: MAINTAINER.md readability for Rust newcomers

**Total: 15 items across 5 phases** (7 human verification, 5 cosmetic/low, 3 deferred)

---

## Human Verification Checklist

These items require a live environment and cannot be verified programmatically:

- [ ] Push to GitHub and verify CI workflows pass (PullRequestCI, CodeQuality, MainDistributionPipeline)
- [ ] Run `just test-sql` to verify all SQLLogicTest sections pass including Phase 4
- [ ] Run `just setup-ducklake && just test-iceberg` to verify DuckLake/Iceberg integration
- [ ] Trigger DuckDBVersionMonitor workflow manually and verify conditional PR logic
- [ ] Run `cargo fuzz run fuzz_json_parse -- -max_total_time=10` (nightly)
- [ ] Run `cargo fuzz run fuzz_sql_expand -- -max_total_time=10` (nightly)
- [ ] Run `cargo fuzz run fuzz_query_names -- -max_total_time=10` (nightly)
- [ ] Have a Python developer follow MAINTAINER.md from scratch without external help

---

_Audited: 2026-02-26T14:00:00Z_
_Auditor: Claude (gsd-audit-milestone)_
